#!/bin/bash

echo "[+] Starting Live Host identification"

# Future functionality would include another command to verify all hosts are identified (like non-ping scan)
$(nmap -sn $1 | grep "nmap report" | cut -d" " -f 5 > ipaddress.txt)
echo "[+] Live Host identified"

for ip in $(cat ipaddress.txt); do
	echo "## $ip" >> ip-headers.txt
	##open-ports = $(nmap -p- -T4 $ip | grep "open" | cut -d"/" -f 1)
	##for port in $open-ports; do
	## Need to finish code for displaying open ports
	##echo "**TCP:**  
done
echo "[+] Headers created in ip-headers.txt"

# potential update -p- to just the ports in a quick sweep reconigzed above
$(nmap -p- -A -T4 -iL ipaddress.txt -o nmap-A-results.txt)

echo "[+] Aggressive nmap scan completed"

# Would like to check to ensure file has a size greater than 0 before printing next line
echo "[+] Aggressive results located in nmap-A-results.txt"

# Eventually would like to start a nmap vuln scan on opened ports
# Eventually would like to start dirb on open http ports (if passed option)
